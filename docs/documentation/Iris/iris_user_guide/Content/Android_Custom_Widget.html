<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  

  <link rel="shortcut icon" href="/volt-mx-docs/favicon.ico" type="image/x-icon">

  <link rel="stylesheet" href="/volt-mx-docs/assets/css/just-the-docs-default.css">
  <link rel="stylesheet" href="/volt-mx-docs/assets/css/custom.css">
  

  
    <script type="text/javascript" src="/volt-mx-docs/assets/js/vendor/lunr.min.js"></script>
  
  <script type="text/javascript" src="/volt-mx-docs/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Importing Custom Widgets for Android | VoltMx</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Importing Custom Widgets for Android" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Industry-leading low-code application development platform for delivering beautiful apps across multiple digital touch points with one platform." />
<meta property="og:description" content="Industry-leading low-code application development platform for delivering beautiful apps across multiple digital touch points with one platform." />
<link rel="canonical" href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Iris/iris_user_guide/Content/Android_Custom_Widget.html" />
<meta property="og:url" content="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Iris/iris_user_guide/Content/Android_Custom_Widget.html" />
<meta property="og:site_name" content="VoltMx" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Importing Custom Widgets for Android" />
<script type="application/ld+json">
{"url":"https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Iris/iris_user_guide/Content/Android_Custom_Widget.html","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://hcl-tech-software.github.io/volt-mx-docs/Volt_Mx_logo.png"}},"headline":"Importing Custom Widgets for Android","description":"Industry-leading low-code application development platform for delivering beautiful apps across multiple digital touch points with one platform.","@type":"WebPage","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  
</head>

<body>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-search" viewBox="0 0 24 24">
    <title>Search</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
      <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
    </svg>
  </symbol>
</svg>

<div class="header-wrap">
  
  <div class="top-header">
    <div class="site-header">
      <a href="https://hcl-tech-software.github.io/volt-mx-docs/" class="site-title lh-tight">
  <div class="site-logo"></div>

</a>
      <a href="#" id="mainmenu-button"  class="site-button">
        <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg>
      </a>
    </div>
  </div>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="svg-link" viewBox="0 0 24 24">
      <title>Link</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
      </svg>
    </symbol>
    <symbol id="svg-search" viewBox="0 0 24 24">
      <title>Search</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
        <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
      </svg>
    </symbol>
    <symbol id="svg-menu" viewBox="0 0 24 24">
      <title>Menu</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
        <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </symbol>
    <symbol id="svg-arrow-right" viewBox="0 0 24 24">
      <title>Expand</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
        <polyline points="9 18 15 12 9 6"></polyline>
      </svg>
    </symbol>
    <symbol id="svg-doc" viewBox="0 0 24 24">
      <title>Document</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
        <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
      </svg>
    </symbol>
  </svg>

  <div id="main-header" class="main-header">
  
   
   <!-- <div class="search-prepare" id="search-prepare">
    <p><img src=" /volt-mx-docs/assets/images/preload.gif" style="height: 24px; width: 24px; margin-right: 5px;" /> Preparing your search results...</p>
  </div>  -->
     <div class="search">
    
       <div class="search-input-wrap">
         <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="search resources..." aria-label="Search VoltMx" autocomplete="off">
         <label for="search-input" class="search-label" id="searchButton"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
                 </div>
                        
       <div id="search-results" class="search-results"></div>

       
     </div>
   
   <ul class="page-nav" id="page-nav">
    <li><a href="#">Community</a></li>
    <li><a href="#" class="active">Learn</a></li>
    <li><a href="#">Releases</a></li>
    <li><a href="#">Training</a></li>
    <li><a href="#">Ideas</a></li>
    <li><a href="#">Marketplace</a></li>
    <li><a href="#">Login</a></li>
  </ul>
  

  
 </div>
 <script>
   const pageNav = document.getElementById('page-nav');
    const mainHeader = document.getElementById('main-header');
    const mainmenuButton = document.getElementById('mainmenu-button');
  (function(){
   
   mainmenuButton.addEventListener('click', function(){
     pageNav.classList.toggle('nav-open');
});
})();

</script>
  <div class="sub-nav-wrap" id="myDIV">
    <ul class="sub-nav" >
        <li >
            <a href="/volt-mx-docs/docs/getting-started/"  class="sub-link">Getting Started</a>
        </li>
        <li>
            <a href="/volt-mx-docs/docs/tutorials/" class="sub-link">Tutorials</a>
        </li>
        <li>
            <a href="/volt-mx-docs/docs/documentation/" class="sub-link">Documentation</a>
        </li>
        <li>
            <a href="/volt-mx-docs/docs/articles/" title="test" class="sub-link">Articles</a>
        </li>
    </ul>
    <a href="#" id="menu-button" class="site-button">
        <!-- <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> -->
        select a topic <svg viewBox="0 0 24 24" class="carat-topic"><use xlink:href="#svg-arrow-right"></use></svg>
      </a>
</div>
</div> 

<style>
  .sub-nav a[href*="/documentation/"] {
   border-bottom: 3px #d694f9 solid;
}
</style>
<div class="content-wrap">
  <div class="side-bar scrollable-container">
    <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav scrollable">
      <ul class="nav-list"><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/foundrySDKs.html" class="nav-list-link">Foundry SDKs</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/voltmxFoundryFundamentals.html" class="nav-list-link">VoltMX Foundry Fundamentals</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/fundamentals.html" class="nav-list-link">Fundamentals</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/projectorg.html" class="nav-list-link">Project Organization</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/appUserInterface.html" class="nav-list-link">App User Interface</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/widgetApiReference.html" class="nav-list-link">Widgets & API Reference</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/webAppDevelopment.html" class="nav-list-link">Web App Development</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/dataBackEndIntergration.html" class="nav-list-link">Data & Back-end Integration</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/buildAndPublish.html" class="nav-list-link">Build and Publish</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/extensibility.html" class="nav-list-link">Extensibility</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/security.html" class="nav-list-link">Security</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/howTosSampleApps.html" class="nav-list-link">How Tos & Sample Apps</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/dataIntegrationServices.html" class="nav-list-link">Data Integration Services</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/offlineObjects.html" class="nav-list-link">Offline Objects</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/apiMangement.html" class="nav-list-link">API Management</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/appServicesAdminitration.html" class="nav-list-link">App Services Administration</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/advancedServerFeature.html" class="nav-list-link">Advanced Server Features</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/analyticsAndApm.html" class="nav-list-link">Analytics and APM</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/engagementServices.html" class="nav-list-link">Engagement Services</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/quantumSync.html" class="nav-list-link">VoltMX Sync (Legacy)</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/devOps.html" class="nav-list-link">DevOps</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/heradlessAndContinuousIntegration.html" class="nav-list-link">Headless and Continuous Integration Build</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/installationManagement.html" class="nav-list-link">Installation & Management</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/deployment.html" class="nav-list-link">Deployment</a></li></ul>
    </nav>
  
  </div>
  
    <div class="main scrollable-container" id="top">
      
      <div id="main-content-wrap" class="main-content-wrap scrollable">
        
          
        
        <div id="main-content" class="main-content" role="main">
          
            <h2 id="importing-custom-widgets-for-android">
        
        
          <a href="#importing-custom-widgets-for-android" class="anchor-heading" aria-labelledby="importing-custom-widgets-for-android"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Importing Custom Widgets for Android
        
        
      </h2>
    

<p>You can import and create your own custom widgets for the Android platform. VoltMX Irisplatform has defined a contract that any custom widget should implement. This contract is referred to as a widget wrapper. The main purpose of the widget wrapper is to enable VoltMX IrisPlatform to initialize the widget when it is placed in a form that is currently being rendered. The wrapper notifies the custom widget when there is a change in its state. The change in state can be a programmatic change to one of the properties exposed by it or a user driven event raised on the custom widget.</p>

<p>All changes in state are notified to the custom widget through the widget wrapper contract. If you want to use a widget developed by using any 3rd party library or framework, you should expose the widget to the VoltMX Iris Android platform by implementing a Java abstract class defined by the VoltMX Iris Android platform. This java class implementation should be done in a separate java project which should be exported as a library jar file. These class files in the library jar are imported using the <a href="#importing-custom-widgets-for-android">Importing Custom Widgets</a> procedure.</p>
      <h3 id="android-wrapper">
        
        
          <a href="#android-wrapper" class="anchor-heading" aria-labelledby="android-wrapper"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Android Wrapper
        
        
      </h3>
    

<p>The contract definition is as follows:</p>

<p>public abstract android.view.View onCreateView (android.content.Context context)</p>

<p>This mandatory method is called by the platform whenever a new instance of custom widget view is required. The subclasses should not hold the reference to the created View and the context argument in any local instance variables. If reference is held, it should be nullified in onDestroyView callback, otherwise would lead to Out of Memory issues.</p>

<p>public void onPropertySet (View widgetInstance, Object name, Object value)</p>

<p>This method is called by the platform whenever a value is assigned to custom widget property by the application. The widgetInstance argument can be null if the custom widget View component is not yet created.</p>

<p>public void Object onPropertyGet (View widgetInstance, Object key)</p>

<p>This method is invoked by the platform when a property is read by the application. The widgetInstance argument can be null if the custom widget view component is not yet created. If this method is not overridden, or if overridden and do not handle the property key i.e., return null, then platform will pick the value of the property from the model. Subclasses can use the setModelProperty to update the model.</p>

<p>public final void setPropertyToModel(String name, Object value)</p>

<p>This method adds or updates the model for a given property with a given value.</p>

<p>public final Object getPropertyFromModel(String name)</p>

<p>This method returns the value for a given property name</p>

<p>public abstract void onDestroyView(View widgetInstance)</p>

<p>This method is called by the platform just before View instance is freed by the platform.</p>

<p>public void onOrientationChanged(int orientation)</p>

<p>This is a callback invoked by platform whenever an orientation is changed for a Form whose orientation mode is set to BOTH. The value of orientation argument is as that of android platform orientation constants.</p>

<blockquote>
  <p><strong><em>Important:</em></strong> The abstract class for these contracts are available in the following JAR files at:</p>
</blockquote>

<ul>
  <li>Location in the <strong>Workspace</strong> folder: <strong>\temp\AppName\build\luaandroid\dist\AppName\libs\voltmxwidgets.jar</strong></li>
  <li>Location in the <strong>Android-SDK</strong> folder: <strong>\android-sdk\platforms\android-18\android.jar</strong></li>
</ul>

<p>Android wrapper Java class for custom widget implementation should be done in a separate java project that should be exported as a library JAR file. Then this library JAR is imported using the <a href="#importing-custom-widgets-for-android">Importing Custom Widgets</a> procedure.</p>
      <h3 id="creating-a-custom-widget-wrapper-java-project">
        
        
          <a href="#creating-a-custom-widget-wrapper-java-project" class="anchor-heading" aria-labelledby="creating-a-custom-widget-wrapper-java-project"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating a Custom Widget Wrapper Java Project
        
        
      </h3>
    

<p>The java project implementing custom widget require methods/interfaces from VoltMX Iris Android platform to be able to compile the project. These methods are available in the <code class="language-plaintext highlighter-rouge">voltmxwidgets.jar</code> file. The project must include this JAR file in its project properties as a dependent library.</p>

<p>To get <code class="language-plaintext highlighter-rouge">voltmxwidgets.jar</code> file, do the following:</p>

<ol>
  <li>Open the project in VoltMX Iris and build the project for Android.</li>
  <li>
    <p>Navigate to the location <code class="language-plaintext highlighter-rouge">&lt;workspace&gt;/temp/&lt;app&gt;/build/luaandroid/dist/&lt;app&gt;/libs</code> directory. It contains a <code class="language-plaintext highlighter-rouge">voltmxwidgets.jar</code> file.</p>

    <blockquote>
      <p><strong><em>Note:</em></strong> The <code class="language-plaintext highlighter-rouge">voltmxwidgets.jar</code> file can either be:</p>
    </blockquote>

    <ul>
      <li>Copied to the <code class="language-plaintext highlighter-rouge">libs</code> directory in the Java project that is created for developing the custom widget. Or</li>
      <li>Added as dependent library in the Java project’s properties by giving the path to this file.</li>
    </ul>
  </li>
</ol>

<p>Java application has to be compiled and exported as a JAR file. It will be used during custom widget importing in VoltMX Iris.</p>
      <h4 id="sample-wrapperclass-file-for-android">
        
        
          <a href="#sample-wrapperclass-file-for-android" class="anchor-heading" aria-labelledby="sample-wrapperclass-file-for-android"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Sample wrapper.class File for Android
        
        
      </h4>
    

<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">package com.example.bar;

//The following APIs are part of android.jar file

import android.content.Context;
import android.util.Log;
import android.view.View;

//The following APIs are part of voltmxwidgets.jar file

import com.example.bar.RangeSeekBar.OnRangeSeekBarChangeListener;
import com.hcl.api.ui.VoltMXCustomWidget;
import com.hcl.vm.Function;

//The class name specified must be the same as the name of the custom widget in VoltMX Iris
public class CustomRange extends VoltMXCustomWidget {

    Function jsCallback;
    RangeSeekBar &lt; Integer &gt; rangeBar;
    private static String TAG = "CustomRange";
    //This is a mandatory method
    public View onCreateView(Context context) {
        int low = ((Double) getPropertyFromModel("low")).intValue();
        int high = ((Double) getPropertyFromModel("high")).intValue();
        rangeBar = new RangeSeekBar &lt; Integer &gt; (low, high, context);
        rangeBar.setOnRangeSeekBarChangeListener(new OnRangeSeekBarChangeListener &lt; Integer &gt; () {@
            Override
            public void onRangeSeekBarValuesChanged(RangeSeekBar &lt;? &gt; bar, Integer minValue, Integer maxValue) {
                // handle changed range values
                try {
                    jsCallback.execute(new Object\[\] {
                        minValue, maxValue
                    });
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                Log.i("FullscreenActivity", "User selected new range values: MIN=" + minValue + ", MAX=" + maxValue);
            }
        });
        jsCallback = (Function) getPropertyFromModel("slideCheck");
        return rangeBar;
    }
    //Destroys the widget instance when the form goes out of view
    public void onDestroyView(View widgetInstance) {
        // TODO Auto-generated method stub
        //setPropertyToModel("text",b.gettext());

        widgetInstance = null;
    }

    public void printLog() {
        Log.d(TAG, "\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*CUSTOM WIDGET\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*");
    }


    public void onPropertySet(View widgetInstance, Object key, Object value) {
        Log.d(TAG, "\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*onPropertySet\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*");
        String k = ((String) key).intern();
        if (k == "low")
            ((RangeSeekBar &lt; Number &gt; ) widgetInstance).setSelectedMinValue(((Double) value).intValue());
        else if (k == "high")
            ((RangeSeekBar &lt; Number &gt; ) widgetInstance).setSelectedMaxValue(((Double) value).intValue());
    }

    public Object onPropertyGet(View widgetInstance, Object key) {
        String k = ((String) key).intern();
        Log.d(TAG, "\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*onPropertyGet\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*");
        if (k == "low")
            ((RangeSeekBar &lt; Number &gt; ) widgetInstance).getSelectedMinValue();
        else if (k == "high")
            ((RangeSeekBar &lt; Number &gt; ) widgetInstance).getSelectedMaxValue();
        return null;
    }

    public void onOrientationChanged(int orientation) {}
}					</code></pre>
</figure>

<p>Limitations</p>

<ul>
  <li>As JavaScript is dynamic typed language, all it understands is a number which can hold any float number. So, all number type arguments are mapped to Double always. It is the responsibility of the custom widget implementer to convert the double type to the respective types. If not, you would see class cast exception.</li>
  <li>You cannot pass any kind of java object to JavaScript. It should be either Vector (for JS array) or Hashtable (for JS Object).</li>
</ul>
      <h3 id="importing-custom-widgets-for-android-1">
        
        
          <a href="#importing-custom-widgets-for-android-1" class="anchor-heading" aria-labelledby="importing-custom-widgets-for-android-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Importing Custom Widgets for Android
        
        
      </h3>
    

<p>To import files for a third-party widget, execute the following:</p>

<ol>
  <li>On the <strong>Edit</strong> menu of VoltMX Iris, point to <strong>Integrate Third Party</strong>, then <strong>Manage Custom Widgets</strong>, and then click <strong>Android</strong>.</li>
  <li>
    <p>In the left pane, right-click <strong>JavaScript Custom Widget Definition</strong> and click <strong>Add JavaScript Namespace</strong>.</p>
  </li>
  <li>Under JavaScript Namespace, in the Name field, enter a name. The name you enter should be easily correspondable with the name of the widget you’re importing, must be unique, and cannot be any of the reserved namespace names of the VoltMX system. For example, widget, window, segui, and so forth are reserved namespace names and should not be used for third-party libraries.</li>
  <li>Click <strong>Finish</strong>. If you’re asked if you want to proceed with generating code for the custom widget, click <strong>Yes</strong>.</li>
  <li>To add the widget libraries to the namespace you just created, on the Project menu of VoltMX Iris, point to <strong>Integrate Third Party</strong>, then <strong>Manage Custom Widgets</strong>, and then click <strong>Android</strong>.</li>
  <li>The namespace you created appears in the left pane. Right-click the namespace and select <strong>Add JavaScript Widget</strong>.</li>
  <li>Specify a name and an icon for the custom widget. The icon that you specify for the custom widget will accompany the widget in the VoltMX Iris user interface in the list of available custom widgets. The supported icon format is <em>.png</em>.</li>
  <li>You now import the custom widget’s library. Click the <strong>Native Mappings</strong> tab, click the Manage Libraries icon <img src="/volt-mx-docs/docs/documentation/Iris/iris_user_guide/Content/Resources/Images/AddCustWgtLib.png" alt="" />, and then click <strong>Import</strong> to browse to and select the <code class="language-plaintext highlighter-rouge">.jar</code> file that consists of the protocols, event delegates, files, and images (if any) required for the custom widget.</li>
  <li>Enter the <strong>Package</strong> and <strong>Widget Class</strong> names in the appropriate fields. The names should be the same as the package name and class name in the wrapper file.</li>
  <li>Now that you have the library imported, you can add any additional properties that you want the custom widget to have in addition to the default properties that VoltMX Iris provides. To do so, in the left pane of the Custom Widget Interface dialog box, click the arrow <img src="/volt-mx-docs/docs/documentation/Iris/iris_user_guide/Content/Resources/Images/BuildArrow.png" alt="" /> of the widget you created to reveal its properties, and then click <strong>Widget Properties</strong>. Click <img src="/volt-mx-docs/docs/documentation/Iris/iris_user_guide/Content/Resources/Images/add_button.png" alt="" />, and then specify the JavaScript Type, the IDE Data Type, the Default Value for the property, indicate whether or not the property is Writable, and specify any Event Parameters (if applicable). Click <strong>Finish</strong>.</li>
  <li>On the Native Mappings tab, map each of the property to its corresponding datatype in the Native platform. To define an event in the Widgets Properties tab, you must specify datatype as <strong>Function</strong>. VoltMX Iris automatically assigns this datatype as <strong>Callback</strong> in the Native Mapping tab.</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>The following table explains the datatype mapping for Android:

| JavaScript Type | Native Type |
| --- | --- |
| Number | int, long,float, double , java.lang.Integer, java.lang.Long, java.lang.Double, java.lang.Float(Depending on the metadata provided) |
| String | java.lang.String |
| Boolean | java.lang.Boolean, boolean |
| Array | java.util.Vector |
| Object | java.lang.Object, java.lang.Hashtable |
| Function | com.voltmx.vm.Function |
</code></pre></div></div>

<ol>
  <li>To define a method associated with a widget, do the following:</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>*   In left pane, right-click the defined widget, and select **Add JavaScript Method**. The widget method, is added in the left pane
    
    ![](/volt-mx-docs/docs/documentation/Iris/iris_user_guide/Content/Resources/Images/Js_method.png)
    
*   In the right pane, in the **Custom Widget Method Definition** tab, you can define the parameters and corresponding datatypes of a particular method. You can also set a return type of a method.
    
    ![](/volt-mx-docs/docs/documentation/Iris/iris_user_guide/Content/Resources/Images/Widget_method_455x459.png)
    

*   Under the Native Mappings tab, map each of the parameter to its corresponding datatype in the Native platform. JavaScript data types are represented as Object counter parts in the Native SDK as against primitive types. For example, _java.lang.Double_ is used instead of _double_ and _java.lang.Boolean_ instead of _boolean_.
    
    The following table explains the datatype mapping for Android:
    
    | JavaScript Type | Native Type |
    | --- | --- |
    | Number | int, long,float, double , java.lang.Integer, java.lang.Long, java.lang.Double, java.lang.Float(Depending on the metadata provided) |
    | String | java.lang.String |
    | Boolean | java.lang.Boolean, boolean |
    | Array | java.util.Vector |
    | Object | java.lang.Object, java.lang.Hashtable |
    | Function | com.voltmx.vm.Function |
    
*   Based on the datatypes specified for the parameter and the return type, all the fields in the **Native Mappings** tab are populated. You can change the datatype for a parameter if the JavaScript type is set as Number or Object. Enter a name for the instance method in which the parameters are passed. If any property or parameter to the method is of type Function, then this function/method/callback can be executed from the Java class with the help of a wrapper method provided by the platform.
    
    ![](/volt-mx-docs/docs/documentation/Iris/iris_user_guide/Content/Resources/Images/Instance_695x475.png)
</code></pre></div></div>

<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">public void printLog(String name, Function callbackJS) {
        try {
            callbackJS.execute(new Object\[\] {
                infotable
            });
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
    If the callback / method has time taking tasks then it should use the method "executeAsync” instead of "
    execute”. And it is always advised not to perform time taking tasks in these callbacks.Also use "executeAsync” as much as possible.try {			callbackJS.executeAsync(new Object\[\] {infotable});}catch(Exception e) {e.printStackTrace();}}					
    
    </code></pre>
</figure>

<ol>
  <li>Click <strong>Finish</strong> to import the Custom Widget. A confirmation dialog appears. Click <strong>Yes</strong>.</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>The custom widget is now available at the bottom of the Widget tab, located on the VoltMX IrisLibrary pane, and you can drag it into a container like any other widget, and view its properties on the Properties pane.

The Preview feature is not available for custom widgets. After you build the application you can view the library files which are built in the _....webapps/&lt;appname&gt;/platform/jslib/thirdparty/widgets_ folder.

&gt; **_Important:_** If you edit the properties of a defined custom widget after you drag and drop it on a form, ensure that you delete the added instances of the custom widget on the form and add it on the form again, since the custom widgets added on the form before the edit will not reflect the newly changed properties.
</code></pre></div></div>
      <h3 id="important-considerations">
        
        
          <a href="#important-considerations" class="anchor-heading" aria-labelledby="important-considerations"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Important Considerations
        
        
      </h3>
    

<ul>
  <li>All resources related to custom widget must reside in this location: <code class="language-plaintext highlighter-rouge">&lt;workspace&gt;/&lt;app&gt;/resources/mobile/native/android</code>.</li>
  <li>Under resources folder, sub-directories include: assets, drawable, layout, anim, values, xml, raw, and so on.</li>
  <li>
    <p>In the custom widget, these resources cannot be accessed using resource IDs directly like R.drawable.xxx.</p>

    <p>These resources can be accessed as follows:</p>
  </li>
</ul>

<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">int resId = VoltMXMain.getAppContext().getResources().getIdentifier(resName, type, VoltMXMain.getAppContext().getPackageName());						
    
    </code></pre>
</figure>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>*   **Scenario 1:** If the resource name is `logo.png` and it is present in `drawable` (type) directory, then resource ID can be retrieved as follows:
</code></pre></div></div>

<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">int resId = VoltMXMain.getAppContext().getResources().getIdentifier(“logo.png”, “drawable”, VoltMXMain.getAppContext().getPackageName());						
        
        </code></pre>
</figure>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>*   **Scenario 2**: If the xml layout resource `calendar_view.xml` is present in `layout` directory, then it can be retrieved as follows:
</code></pre></div></div>

<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">VoltMXMain.getAppContext().getResources().getLayout(VoltMXMain.getAppContext().getResources().getIdentifier("calendar\_view", "layout", VoltMXMain.getAppContext().getPackageName()))						
        
        </code></pre>
</figure>

<ul>
  <li>Any UI update made to custom widget must be posted as a runnable to UI Thread as follows:</li>
</ul>

<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">KVoltMXMain.getAppContext().getResources().getLayout(VoltMXMain.getAppContext().getResources().getIdentifier("calendar\_view", "layout", VoltMXMain.getAppContext().getPackageName()))((Activity) VoltMXMain.getActivtiyContext()).runOnUIThread(new Runnable() {
        public void run() {
            //Do necessary Custom widget UI updates
        }
    });						
    
    </code></pre>
</figure>

<ul>
  <li>To receive touch events for the widget (If custom widget is placed inside a scrollable container), it needs to override below function and the widget or view must be changed to ViewGroup.</li>
</ul>

<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">public boolean onInterceptTouchEvent(MotionEvent ev) {
        int action = ev.getAction();
        switch (action) {
            case MotionEvent.ACTION\_DOWN:
                this.getParent().requestDisallowInterceptTouchEvent(true);
                break;
        }
        return super.onInterceptTouchEvent(ev);
    }						
    
    </code></pre>
</figure>

          
  
          
  
          
          
           
              <!--<p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2017-2020 HCL Digital Solutions</p>-->

  
              
                <div class="d-flex mt-2">
                  
                  
                </div>
              
            </footer>
          
  
        </div>
      </div>
  
      
        
  
        <div class="search-overlay"></div>
      
  
      
    </div>
  
    
    <div class="right-menu scrollable-container" >
      <div class="scrollable">
        
<nav role="navigation" aria-label="Main" id="sub-site-nav" class="site-nav" >
<ul class="nav-list">
  
</ul>

</nav>

    <script>
     const subpageNav = document.getElementById('sub-site-nav');
     const submainmenuButton = document.getElementById('sub-menu-button');
    
   (function(){
    submainmenuButton.addEventListener('click', function(){ 
      document.getElementById('site-nav').classList.remove('nav-open');
      subpageNav.classList.toggle('nav-open');
 });
})();
</script>

      </div>
  </div></div>


 <!-- footer from footer html -->
 <footer>

    <!-- The Modal -->
<div id="copyright-modal" class="modal">

    <!-- Modal content -->
    <div class="modal-content">
      <span class="close">&times;</span>
      <p>
        Copyright © 2021 HCL - August, 2020 - All rights reserved.
      </p>
      <p>This document contains information proprietary to HCL., is bound by the HCL license agreements, and may not be used except in the context of understanding the use and methods of HCL., software without prior, express, written permission. HCL, Empowering Everywhere, HCL Foundry, HCL Flare, and HCL Iris are trademarks of HCL. MobileFoundry is a registered trademark of HCL. Microsoft, the Microsoft logo, Internet Explorer, Windows, and Windows Vista are registered trademarks of Microsoft Corporation. Apple, the Apple logo, iTunes, iPhone, iPad, OS X, Objective-C, Safari, Apple Pay, Apple Watch, and Xcode are trademarks or registered trademarks of Apple, Inc. Google, the Google logo, Android, and the Android logo are registered trademarks of Google, Inc. Chrome is a trademark of Google, Inc. BlackBerry, PlayBook, Research in Motion, and RIM are registered trademarks of BlackBerry. SAP® and SAP® Business Suite® are registered trademarks of SAP SE in Germany and in several other countries. All other terms, trademarks, or service marks mentioned in this document have been capitalized and are to be considered the property of their respective owners.</p>
    </div>
  
  </div>
    <div class="foot-wrap">
        <div class="foot-nav">
            &copy; <a href="#" id="copyrightBtn">Copyright</a> 2021 HCL Technologies Limited. 
            <a href="https://hcltechsw.com/wps/portal/legal/privacy" style="margin-left: 10px;">Privacy Statement</a> | <a href="#">Terms of Use</a>
        </div>
        <ul class="social-nav">
            <li><a href="#" class="facebook">Facebook</a></li>
            <li><a href="#" class="linkedin">LinkedIn</a></li>
            <li><a href="#" class="twitter">Twitter</a></li>
            <li><a href="#" class="youtube">Youtube</a></li>
            <li><a href="#" class="glassdoor">Glassdoor</a></li>
        </ul>
    </div>

    
</footer>
<script>
    var modal = document.getElementById("copyright-modal");

// Get the button that opens the modal
var btn = document.getElementById("copyrightBtn");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks on the button, open the modal
btn.onclick = function(e) {
    e.preventDefault();
  modal.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
  document.querySelector("span.close").onclick = function() {
  modal.style.display = "none";
}
document.onkeydown = function(evt) {
    evt = evt || window.event;
    if (evt.keyCode == 27) {
      modal.style.display = "none";
    }
};
// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}


</script>
</body>
</html>
