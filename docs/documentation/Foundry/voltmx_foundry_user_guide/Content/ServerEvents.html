<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  

  <link rel="shortcut icon" href="/volt-mx-docs/favicon.ico" type="image/x-icon">

  <link rel="stylesheet" href="/volt-mx-docs/assets/css/just-the-docs-default.css">
  <link rel="stylesheet" href="/volt-mx-docs/assets/css/custom.css">
  

  
    <script type="text/javascript" src="/volt-mx-docs/assets/js/vendor/lunr.min.js"></script>
  
  <script type="text/javascript" src="/volt-mx-docs/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>VoltMx | Industry-leading low-code application development platform for delivering beautiful apps across multiple digital touch points with one platform.</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="VoltMx" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Industry-leading low-code application development platform for delivering beautiful apps across multiple digital touch points with one platform." />
<meta property="og:description" content="Industry-leading low-code application development platform for delivering beautiful apps across multiple digital touch points with one platform." />
<link rel="canonical" href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmx_foundry_user_guide/Content/ServerEvents.html" />
<meta property="og:url" content="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmx_foundry_user_guide/Content/ServerEvents.html" />
<meta property="og:site_name" content="VoltMx" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="VoltMx" />
<script type="application/ld+json">
{"url":"https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmx_foundry_user_guide/Content/ServerEvents.html","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://hcl-tech-software.github.io/volt-mx-docs/Volt_Mx_logo.png"}},"headline":"VoltMx","description":"Industry-leading low-code application development platform for delivering beautiful apps across multiple digital touch points with one platform.","@type":"WebPage","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  
</head>

<body>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-search" viewBox="0 0 24 24">
    <title>Search</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
      <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
    </svg>
  </symbol>
</svg>

<div class="header-wrap">
  
  <div class="top-header">
    <div class="site-header">
      <a href="https://hcl-tech-software.github.io/volt-mx-docs/" class="site-title lh-tight">
  <div class="site-logo"></div>

</a>
      <a href="#" id="mainmenu-button"  class="site-button">
        <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg>
      </a>
    </div>
  </div>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="svg-link" viewBox="0 0 24 24">
      <title>Link</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
      </svg>
    </symbol>
    <symbol id="svg-search" viewBox="0 0 24 24">
      <title>Search</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
        <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
      </svg>
    </symbol>
    <symbol id="svg-menu" viewBox="0 0 24 24">
      <title>Menu</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
        <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </symbol>
    <symbol id="svg-arrow-right" viewBox="0 0 24 24">
      <title>Expand</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
        <polyline points="9 18 15 12 9 6"></polyline>
      </svg>
    </symbol>
    <symbol id="svg-doc" viewBox="0 0 24 24">
      <title>Document</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
        <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
      </svg>
    </symbol>
  </svg>

  <div id="main-header" class="main-header">
  
   
   <!-- <div class="search-prepare" id="search-prepare">
    <p><img src=" /volt-mx-docs/assets/images/preload.gif" style="height: 24px; width: 24px; margin-right: 5px;" /> Preparing your search results...</p>
  </div>  -->
     <div class="search">
    
       <div class="search-input-wrap">
         <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="search resources..." aria-label="Search VoltMx" autocomplete="off">
         <label for="search-input" class="search-label" id="searchButton"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
                 </div>
                        
       <div id="search-results" class="search-results"></div>

       
     </div>
   
   <ul class="page-nav" id="page-nav">
    <li><a href="#">Community</a></li>
    <li><a href="#" class="active">Learn</a></li>
    <li><a href="#">Releases</a></li>
    <li><a href="#">Training</a></li>
    <li><a href="#">Ideas</a></li>
    <li><a href="#">Marketplace</a></li>
    <li><a href="#">Login</a></li>
  </ul>
  

  
 </div>
 <script>
   const pageNav = document.getElementById('page-nav');
    const mainHeader = document.getElementById('main-header');
    const mainmenuButton = document.getElementById('mainmenu-button');
  (function(){
   
   mainmenuButton.addEventListener('click', function(){
     pageNav.classList.toggle('nav-open');
});
})();

</script>
  <div class="sub-nav-wrap" id="myDIV">
    <ul class="sub-nav" >
        <li >
            <a href="/volt-mx-docs/docs/getting-started/"  class="sub-link">Getting Started</a>
        </li>
        <li>
            <a href="/volt-mx-docs/docs/tutorials/" class="sub-link">Tutorials</a>
        </li>
        <li>
            <a href="/volt-mx-docs/docs/documentation/" class="sub-link">Documentation</a>
        </li>
        <li>
            <a href="/volt-mx-docs/docs/articles/" title="test" class="sub-link">Articles</a>
        </li>
    </ul>
    <a href="#" id="menu-button" class="site-button">
        <!-- <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> -->
        select a topic <svg viewBox="0 0 24 24" class="carat-topic"><use xlink:href="#svg-arrow-right"></use></svg>
      </a>
</div>
</div> 

<style>
  .sub-nav a[href*="/documentation/"] {
   border-bottom: 3px #d694f9 solid;
}
</style>

<div class="content-wrap">
  <div class="side-bar scrollable-container">
    <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav scrollable">
      <ul class="nav-list"><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Iris/iris_rel_notes/Content/Common/copyright.html" class="nav-list-link">copyright</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmx_foundry_release_notes/Content/Common/copyrightOld.html" class="nav-list-link">copyrightOld</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Iris/iris_rel_notes/Content/Common/glossary.html" class="nav-list-link">Glossary</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Iris/iris_rel_notes/Content/Common/home.html" class="nav-list-link">home</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmx_appfactory_user_guide/Content/Known_Issues.html" class="nav-list-link">Known Issues in HCL App Factory</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmx_Foundry_deployment_guide/Content/FAQs.html" class="nav-list-link">This topic describes how to control access to VoltMX Foundry applications and services. This topic is part of the VoltMX Foundry Console User Guide.</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Iris/iris_starter_install_mac/Content/Getting%20Started.html" class="nav-list-link">Getting Started</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/fundamentals.html" class="nav-list-link">Fundamentals</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/projectorg.html" class="nav-list-link">Project Organization</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/appUserInterface.html" class="nav-list-link">App User Interface</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/widgetApiReference.html" class="nav-list-link">Widgets & API Reference</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/webAppDevelopment.html" class="nav-list-link">Web App Development</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/dataBackEndIntergration.html" class="nav-list-link">Data & Back-end Integration</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/buildAndPublish.html" class="nav-list-link">Build and Publish</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/extensibility.html" class="nav-list-link">Extensibility</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/security.html" class="nav-list-link">Security</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/howTosSampleApps.html" class="nav-list-link">How Tos & Sample Apps</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/dataIntegrationServices.html" class="nav-list-link">Data Integration Services</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/offlineObjects.html" class="nav-list-link">Offline Objects</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/apiMangement.html" class="nav-list-link">API Management</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/appServicesAdminitration.html" class="nav-list-link">App Services Administration</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/advancedServerFeature.html" class="nav-list-link">Advanced Server Features</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/analyticsAndApm.html" class="nav-list-link">Analytics and APM</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/engagementServices.html" class="nav-list-link">Engagement Services</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/quantumSync.html" class="nav-list-link">VoltMX Sync (Legacy)</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/devOps.html" class="nav-list-link">DevOps</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/heradlessAndContinuousIntegration.html" class="nav-list-link">Headless and Continuous Integration Build</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/installationManagement.html" class="nav-list-link">Installation & Management</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/deployment.html" class="nav-list-link">Deployment</a></li></ul>
    </nav>
  
  </div>
  
    <div class="main scrollable-container" id="top">
      
      <div id="main-content-wrap" class="main-content-wrap scrollable">
        
          
        
        <div id="main-content" class="main-content" role="main">
          
            <p>User Guide: <a href="Services.html#top">Integration</a> &gt; <a href="Advanced_Configurations.html">Advanced Configurations</a> &gt; Server Events</p>
      <h1 id="server-events">
        
        
          <a href="#server-events" class="anchor-heading" aria-labelledby="server-events"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Server Events
        
        
      </h1>
    

<p>Server-side events is a capability of the VoltMX Foundry runtime server that enables backend services or custom business logic to fire events and handle events. Server events are helpful when certain activities can be executed asynchronously such as processing a submitted order or invoking a slow backend API where the client app doesn’t need to wait on the response.</p>
      <h2 id="server-events-processing">
        
        
          <a href="#server-events-processing" class="anchor-heading" aria-labelledby="server-events-processing"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Server Events Processing
        
        
      </h2>
    

<p>To process an event, you have to create a Subscriber. You can do it multiple ways like by using an Annotation or through custom java API or by binding a service using VoltMX Foundry Console to act as a subscriber. When an event is raised, the Subscriber listening to it will get the event data. There are two ways to raise an event which are through Auto Event or through Java API.</p>

<p>This event will be added to the memory queue in VoltMX Foundry. A separate thread runs in VoltMX Foundry which will pick the event from the queue and notify the subscribers listening to the specified topic.</p>

<p><img src="/volt-mx-docs/docs/documentation/Foundry/voltmx_foundry_user_guide/Content/Resources/Images/server-events2.png" alt="" /></p>
      <h2 id="terminology">
        
        
          <a href="#terminology" class="anchor-heading" aria-labelledby="terminology"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Terminology
        
        
      </h2>
    

<p><strong>Publisher</strong> - A service/custom code acts as a Publisher when it raises an event, when invoked. It sends the event data to the Event Bus for processing.</p>

<p><strong>Subscriber</strong> - A service/custom code which is listening to a Topic is called a Subscriber. When an event is raised with that Topic, the Subscriber gets the related event data from Event Bus and processes the data.</p>

<p><strong>Topic</strong> - Topics are classes or named logical channels to which Publisher can fire events. The Subscribers listening to a Topic will receive the related event data whenever an event is raised with the subscribed Topic.</p>

<p><strong>Event</strong> - These are messages that contain event data. A Publisher raises an event and a Subscriber consumes the event data of an event.</p>

<p><strong>Event Bus</strong> - It acts as a message broker which stores and routes the event data from Publishers to Subscribers.</p>
      <h2 id="create-a-server-side-event">
        
        
          <a href="#create-a-server-side-event" class="anchor-heading" aria-labelledby="create-a-server-side-event"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create a Server-Side Event
        
        
      </h2>
    

<p>Events can be created (i.e. “raised” or “fired”) as part of a service invocation or from custom business logic. VoltMX Foundry support auto creation and fire of events for incoming request and outgoing response of a service. User can also bind a service to one or more events with specified topics. Custom business logic can subscribe/unsubscribe/raise an event using exposed APIs.</p>

<p>VoltMX Foundry exposes a WebSocket end point to subscribe/unsubscribe/raise an event from an external client. VoltMX Foundry also exposed a HTTP end point to fire an event from any external client. . Once the event is created, the service or business logic will finish executing it. Another service or custom business logic should be configured to handle that event and perform the desired action and this work will be executed in a different process on the server asynchronously.</p>

<blockquote>
  <p><strong><em>Note:</em></strong> HTTP end point doesn’t support subscribe and unsubscribe.</p>
</blockquote>

<p><img src="/volt-mx-docs/docs/documentation/Foundry/voltmx_foundry_user_guide/Content/Resources/Images/server-events1.png" alt="" /></p>
      <h3 id="create-an-event-from-any-service">
        
        
          <a href="#create-an-event-from-any-service" class="anchor-heading" aria-labelledby="create-an-event-from-any-service"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create an Event from any Service
        
        
      </h3>
    

<p><img src="/volt-mx-docs/docs/documentation/Foundry/voltmx_foundry_user_guide/Content/Resources/Images/server-events.PNG" alt="" /></p>

<p><strong>Create event on incoming request</strong>: To create the server-side event on the inbound request, in the Advanced settings tab of an operation, click the <strong>Server Events</strong> tab and then select the <strong>Raise event on incoming request</strong> checkbox. Provide the name of the event that describes the data or purpose of the event in the related <strong>Enter Event Topic Name</strong> box. The event will include the payload of the incoming request and default parameters like service id, operation id, object id, service version, headers, query parameters and more. You can provide semi-colon separated multiple event topic name.</p>

<p><strong>Create event on outgoing response</strong>: To create the server-side event on the outbound response, in the Advanced settings tab of an operation, click the <strong>Server Events</strong> tab and then select the <strong>Create event on outgoing response</strong> checkbox. Provide the name of the event that describes the data or purpose of the event in the <strong>Enter Event Topic Name</strong> box. The event will include the payload of the outgoing response payload and default parameters like service id, operation id, object id, service version, headers, query parameters and more. You can provide semi-colon separated multiple event topic name.</p>

<p>Other services can listen to this event with the help of the given Topic name. Whenever this service is invoked, an Event is raised and subscribers to this Topic will get the relevant event data. You can also provide the Topic name in Parent topic and Child topic name format. When a service subscribes to the parent topic, the event data of all the child topics is sent to the subscriber. If you subscribe to any child topic, the event data related only to the subscribed child topic is sent to the subscriber. Use “/” as a separator for parent and child topic name.</p>

<p>For example, Parent service name can be “transaction” and its child can be “transaction/credit” and “transaction/debit”.</p>
      <h3 id="create-event-from-business-logic">
        
        
          <a href="#create-event-from-business-logic" class="anchor-heading" aria-labelledby="create-event-from-business-logic"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create Event from Business Logic
        
        
      </h3>
    

<p><strong>APIs</strong></p>

<ul>
  <li>
    <p><strong>EventData</strong>: This class is used to create events with details. The subscriber will get the event details if the conditions in the event are met. Event details can contain id, topic, type (type of event data in an event like transaction, audit, and more), data, additional metadata, producer, timestamp, app id and user profile from the identity of the event. Following are the constructors supported to create EventData:</p>

    <ul>
      <li>
        <p><strong>EventData(String topic, Object data)</strong>: It takes only topic and data to create EventData. Identity related attributes like app id, user profile will not be generated in this case.</p>
      </li>
      <li>
        <p><strong>EventData(String topic, Object data, ServicesManager servicesManager)</strong>: It takes topic, data and services manager to create event data. Services Manager will be used to populate identity related attributes like app id, user profile.</p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>EventManager</strong>: This class is used to subscribe/unsubscribe to an event of a specified topic. You can access Event Manager using Services Manager API in their custom code.</p>
  </li>
</ul>

<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">request.getServicesManager().getEventManager()
    </code></pre>
</figure>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>This class contains the following APIs:

*   **subscribe**: Subscribes the given event subscriber to all events with the specified topic.
</code></pre></div></div>

<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">request.getServicesManager().getEventManager().subscribe(&lt;topic&gt;, &lt;subscriber&gt;);  
    
    </code></pre>
</figure>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>*   **unsubscribe**: Unsubscribes the given event subscriber to all events with the specified topic.
</code></pre></div></div>

<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">request.getServicesManager().getEventManager().unsubscribe(&lt;topic&gt;, &lt;subscriber&gt;);
        </code></pre>
</figure>

<ul>
  <li><strong>EventNotifier</strong>: This class is used to notify subscribers and check the status of events. You can access Event Notifier using Services Manager API in their custom code.</li>
</ul>

<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">request.getServicesManager().getEventNotifier();
    </code></pre>
</figure>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>This class contains the following APIs:

*   **notify (with event data)**: Notify all subscribers of the given event based on the topic.
</code></pre></div></div>

<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">request.getServicesManager().getEventNotifier().notify(&lt;event\_data&gt;);
        </code></pre>
</figure>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>*   **notify (with topic and data)**: Creates event data internally and notifies all subscribers of the given event based on the topic.
</code></pre></div></div>

<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">request.getServicesManager().getEventNotifier().notify(&lt;topic&gt;, &lt;data&gt;);
        </code></pre>
</figure>
      <h2 id="handling-server-side-events">
        
        
          <a href="#handling-server-side-events" class="anchor-heading" aria-labelledby="handling-server-side-events"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Handling Server Side Events
        
        
      </h2>
    

<p>Once an event is created, a service or custom business logic is configured to handle that event. The execution of the event handler occurs asynchronously in a separate thread. If the event is handled by a service, the event payload is passed as the request to the service similar to a client invoking the service as a REST API. If the event is handled by custom code, the event payload is passed into the custom logic as part of the event data.</p>
      <h3 id="handle-events-from-service">
        
        
          <a href="#handle-events-from-service" class="anchor-heading" aria-labelledby="handle-events-from-service"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Handle Events from Service
        
        
      </h3>
    

<p><strong>Subscribe (Listen) to an event</strong>: To bind the service to an event of specified topic, in the Advanced settings tab of an operation, click the <strong>Server Events</strong> tab and then select the <strong>Subscribe (Listen) to an event</strong> checkbox. The service will be invoked whenever the subscribed event is triggered with the specified topic. Type the name of the event in the related <strong>Enter Event Topic Name</strong> box. You can provide semi-colon separated multiple event topic name.</p>
      <h3 id="handle-event-from-custom-logic">
        
        
          <a href="#handle-event-from-custom-logic" class="anchor-heading" aria-labelledby="handle-event-from-custom-logic"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Handle Event from Custom Logic:
        
        
      </h3>
    

<p><strong>APIs</strong></p>

<ul>
  <li><strong>EventSubscriber</strong>: This class provides mechanism for receiving notification from notifier and perform the required actions. User can implement this class in their custom code. This class contains the following API:
    <ul>
      <li><strong>onEvent</strong>: Receives notification when any event of the subscribed topic is triggered. Make sure that this API is thread-safe as multiple threads can call this API simultaneously.</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p><strong><em>Note:</em></strong> Refer to the <a href="https://docs.voltmx.com/voltmxlibrary/integration/MiddlewareAPI/index-all.html">Foundry Queue Service java document</a> for more information on Foundry Queue Service APIs.</p>
</blockquote>
      <h2 id="create-subscriber-from-business-logic">
        
        
          <a href="#create-subscriber-from-business-logic" class="anchor-heading" aria-labelledby="create-subscriber-from-business-logic"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create Subscriber from Business Logic
        
        
      </h2>
    

<p>User can create subscriber in their custom code by following ways:</p>

<p>Implementing EventSubscriber Interface:</p>

<p>Implement <strong>EventSubscriber</strong> interface and provide specific implementation of <strong>onEvent</strong> method to create custom subscriber.</p>

<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">public class CustomEventSubscriber implements EventSubscriber {
 
    @Override
    public void onEvent(EventData eventData) {
        // user specific implementation
    }
}</code></pre>
</figure>

<p>Using Annotation</p>

<p>Use <strong>@IntegrationEventSubscriber</strong> to create custom subscriber. While creating subscriber using annotation, user can specify the topic name that he wants to subscribe, and the framework will subscribe the user to the specified topic.</p>

<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">@IntegrationEventSubscriber(topics = {"app/test/events", "app/test/events1"}
public class TestEventSubscriber implements EventSubscriber {
 
    @Override
    public void onEvent(EventData eventData) {
        // user specific implementation
    }
}</code></pre>
</figure>
      <h2 id="use-case">
        
        
          <a href="#use-case" class="anchor-heading" aria-labelledby="use-case"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Use Case
        
        
      </h2>
    

<p>An online shopping website can use server events feature to send the order status emails automatically to its customers who have placed orders on their website. The developer can write the custom code to trigger events when an order is either successful or failed. The concerned customer will get an email depending upon the status of the order.</p>
      <h3 id="custom-code-to-trigger-an-event">
        
        
          <a href="#custom-code-to-trigger-an-event" class="anchor-heading" aria-labelledby="custom-code-to-trigger-an-event"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Custom Code to trigger an Event
        
        
      </h3>
    

<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">import com.hcl.middleware.api.events.EventData;
import com.hcl.middleware.common.DataPostProcessor2;
import com.hcl.middleware.controller.DataControllerRequest;
import com.hcl.middleware.controller.DataControllerResponse;
import com.hcl.middleware.dataobject.Result;
 
public class PostProcessorToTriggerEvents implements DataPostProcessor2 {
 
  @Override
  public Object execute(Result result, DataControllerRequest request,
      DataControllerResponse response) throws Exception {
    EventData eventData;
    if (response.getStatusCode() == 200) {
      eventData = new EventData("apps/order/success", response.getResponse());
      eventData.addAdditionalMetadata("orderId", result.getParamValueByName("orderId"));
    } else {
      eventData = new EventData("apps/order/fail", response.getResponse());
      eventData.addAdditionalMetadata("trackingId", result.getParamValueByName("trackingId"));
    }
 
    eventData.addAdditionalMetadata("userId", result.getParamValueByName("userId"));
    eventData.addAdditionalMetadata("product", result.getParamValueByName("product"));
    request.getServicesManager().getEventNotifier().notify(eventData);
    return result;
  }
}</code></pre>
</figure>

<p><strong>Event on successful order</strong></p>

<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">import java.util.Map;
 
import com.hcl.middleware.api.events.EventData;
import com.hcl.middleware.api.events.EventSubscriber;
import com.hcl.middleware.api.events.IntegrationEventSubscriber;
 
@IntegrationEventSubscriber(topics = {"apps/order/success"})
public class OrderSuccessEvent implements EventSubscriber {
  private static final String SUCCESS\_MESSAGE = "Dear %s, Your order for %s is successful. "
      + "Your order id is%s. Order details:%s.";
 
  @Override
  public void onEvent(EventData eventData) {
    Map&lt;String, Object&gt; additionalMetadata = eventData.getAdditionalMetadata();
    Object userId = additionalMetadata.get("userId");
    Object product = additionalMetadata.get("product");
    Object orderId = additionalMetadata.get("orderId");
    String message = String.format(SUCCESS\_MESSAGE, userId, product, orderId, eventData.getData());
    sendSuccessMail(String.valueOf(userId), message);
  }
 
  private static void sendSuccessMail(String userId, String message) {
  }
}</code></pre>
</figure>

<p>Event on failed order</p>

<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">import java.util.Map;
 
import com.hcl.middleware.api.events.EventData;
import com.hcl.middleware.api.events.EventSubscriber;
import com.hcl.middleware.api.events.IntegrationEventSubscriber;
 
@IntegrationEventSubscriber(topics = {"apps/order/fail"})
public class OrderFailedEvent implements EventSubscriber {
  private static final String FAILURE\_MESSAGE = "Dear %s, Your order for %s is failed. "
      + "Your tracking id is %s. Details: %s.";
 
  @Override
  public void onEvent(EventData eventData) {
    Map&lt;String, Object&gt; additionalMetadata = eventData.getAdditionalMetadata();
    Object userId = additionalMetadata.get("userId");
    Object product = additionalMetadata.get("product");
    Object trackingId = additionalMetadata.get("trackingId");
    String message = String.format(FAILURE\_MESSAGE, userId, product, trackingId,
        eventData.getData());
 
    sendFailureMail(String.valueOf(userId), message);
  }
 
  private static void sendFailureMail(String userId, String message) {
  }
}</code></pre>
</figure>
      <h2 id="raise-an-event-from-http-end-point">
        
        
          <a href="#raise-an-event-from-http-end-point" class="anchor-heading" aria-labelledby="raise-an-event-from-http-end-point"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Raise an Event from HTTP end point
        
        
      </h2>
    

<p>In VoltMX Foundry, you can also raise an event from HTTP end point from external client. You have to invoke a POST method on /ServerEvents endpoint (sample URL: &lt;VoltMX_app_services_url&gt;/services/ServerEvents) with X-VoltMX-Authorization token in header, JSON array body with events as key, topic name, and data for each event.</p>

<p><strong>Sample Request</strong>:</p>

<p><strong>Method</strong>: POST</p>

<p><strong>Header</strong>: X-VoltMX-Authorization : &lt;Authorization_token&gt;</p>

<p><strong>Body</strong>: JSON array with events as key.</p>

<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">{
    "events": \[
        {
            "topic": "transaction/deposit",
            "data": "988",
            "additionalMetadata": {
                "amount": "5678",
                "user": "voltmx"
            }
        }
    \]
}</code></pre>
</figure>
      <h2 id="websocket-endpoint-for-events-servereventsstream">
        
        
          <a href="#websocket-endpoint-for-events-servereventsstream" class="anchor-heading" aria-labelledby="websocket-endpoint-for-events-servereventsstream"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> WebSocket endpoint for events (/ServerEvents/Stream)
        
        
      </h2>
    

<p>If you want to support a bi-directional communication between the client and server, you can use WebSocket to subscribe to an event, unsubscribe from an event, raise an event, and listen to an event from client. WebSocket endpoint is protected with <strong>X-VoltMX-Authorizatio</strong>n token. By default, WebSocket is disabled. Set the <strong>VOLTMX_SERVER_CLIENT_EVENTS_ENABLED</strong> to <strong>true</strong> in <strong>server_configuration</strong> table of admin DB to enable WebSocket.</p>

<p><strong>Sample end point URL</strong>: &lt;VoltMX_foundry_app_services_ul&gt;/services/ServerEvents/Stream</p>

<p><strong>Protocol</strong>: ws</p>

<p><strong>Header</strong>: X-VoltMX-Authorization : &lt;Authorization_token&gt;</p>

<p><strong>Body</strong>:</p>

<ul>
  <li><strong>Subscribe to an event</strong>: JSON array with topic of events to subscribe and subscribe as key.</li>
</ul>

<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">{
    "subscribe": \[
        "transaction/deposit",
        "transaction/withdraw"
    \]
}</code></pre>
</figure>

<ul>
  <li><strong>Raise an event</strong>: JSON array with events as key and topic name and data in body.</li>
</ul>

<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">{
    "events": \[
        {
            "topic": "transaction/deposit",
            "data": "988",
            "additionalMetadata": {
                "amount": "5678",
                "user": "voltmx"
            }
        },
        {
            "topic": "transaction/withdraw",
            "data": "1500",
            "additionalMetadata": {
                "amount": "12345",
                "user": "foundry"
            }
        }
    \]
}</code></pre>
</figure>

<ul>
  <li><strong>Unsubscribe to an event</strong>: JSON array with topic of events to subscribe and <strong>unsubscribe</strong> as key.</li>
</ul>

<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">{
    "unsubscribe": \[
        "transaction/deposit",
        "transaction/withdraw"
    \]
}</code></pre>
</figure>

<blockquote>
  <p><strong><em>Note:</em></strong> You can also subscribe, unsubscribe and raise an event with JSON array as body with required keys and data.</p>
</blockquote>

          
  
          
  
          
          
           
              <!--<p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2017-2020 HCL Digital Solutions</p>-->

  
              
                <div class="d-flex mt-2">
                  
                  
                </div>
              
            </footer>
          
  
        </div>
      </div>
  
      
        
  
        <div class="search-overlay"></div>
      
  
      
    </div>
  
    
    <div class="right-menu scrollable-container" >
      <div class="scrollable">
        
<nav role="navigation" aria-label="Main" id="sub-site-nav" class="site-nav" >
<ul class="nav-list">
  
</ul>

</nav>

    <script>
     const subpageNav = document.getElementById('sub-site-nav');
     const submainmenuButton = document.getElementById('sub-menu-button');
    
   (function(){
    submainmenuButton.addEventListener('click', function(){ 
      document.getElementById('site-nav').classList.remove('nav-open');
      subpageNav.classList.toggle('nav-open');
 });
})();
</script>

      </div>
  </div></div>


 <!-- footer from footer html -->
 <footer>

    <!-- The Modal -->
<div id="copyright-modal" class="modal">

    <!-- Modal content -->
    <div class="modal-content">
      <span class="close">&times;</span>
      <p>
        Copyright © 2021 HCL - August, 2020 - All rights reserved.
      </p>
      <p>This document contains information proprietary to HCL., is bound by the HCL license agreements, and may not be used except in the context of understanding the use and methods of HCL., software without prior, express, written permission. HCL, Empowering Everywhere, HCL Foundry, HCL Flare, and HCL Iris are trademarks of HCL. MobileFoundry is a registered trademark of HCL. Microsoft, the Microsoft logo, Internet Explorer, Windows, and Windows Vista are registered trademarks of Microsoft Corporation. Apple, the Apple logo, iTunes, iPhone, iPad, OS X, Objective-C, Safari, Apple Pay, Apple Watch, and Xcode are trademarks or registered trademarks of Apple, Inc. Google, the Google logo, Android, and the Android logo are registered trademarks of Google, Inc. Chrome is a trademark of Google, Inc. BlackBerry, PlayBook, Research in Motion, and RIM are registered trademarks of BlackBerry. SAP® and SAP® Business Suite® are registered trademarks of SAP SE in Germany and in several other countries. All other terms, trademarks, or service marks mentioned in this document have been capitalized and are to be considered the property of their respective owners.</p>
    </div>
  
  </div>
    <div class="foot-wrap">
        <div class="foot-nav">
            &copy; <a href="#" id="copyrightBtn">Copyright</a> 2021 HCL Technologies Limited. 
            <a href="https://hcltechsw.com/wps/portal/legal/privacy" style="margin-left: 10px;">Privacy Statement</a> | <a href="#">Terms of Use</a>
        </div>
        <ul class="social-nav">
            <li><a href="#" class="facebook">Facebook</a></li>
            <li><a href="#" class="linkedin">LinkedIn</a></li>
            <li><a href="#" class="twitter">Twitter</a></li>
            <li><a href="#" class="youtube">Youtube</a></li>
            <li><a href="#" class="glassdoor">Glassdoor</a></li>
        </ul>
    </div>

    
</footer>
<script>
    var modal = document.getElementById("copyright-modal");

// Get the button that opens the modal
var btn = document.getElementById("copyrightBtn");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks on the button, open the modal
btn.onclick = function(e) {
    e.preventDefault();
  modal.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
  document.querySelector("span.close").onclick = function() {
  modal.style.display = "none";
}
document.onkeydown = function(evt) {
    evt = evt || window.event;
    if (evt.keyCode == 27) {
      modal.style.display = "none";
    }
};
// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}


</script>
</body>
</html>
