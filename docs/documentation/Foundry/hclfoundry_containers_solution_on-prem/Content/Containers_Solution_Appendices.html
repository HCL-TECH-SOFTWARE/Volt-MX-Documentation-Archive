<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <link rel="shortcut icon" href="/volt-mx-docs/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="/volt-mx-docs/assets/css/just-the-docs-default.css">
  <link rel="stylesheet" href="/volt-mx-docs/assets/css/custom.css">
    <script type="text/javascript" src="/volt-mx-docs/assets/js/vendor/lunr.min.js"></script>
  <script type="text/javascript" src="/volt-mx-docs/assets/js/just-the-docs.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Appendices | VoltMx</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Appendices" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Industry-leading low-code application development platform for delivering beautiful apps across multiple digital touch points with one platform." />
<meta property="og:description" content="Industry-leading low-code application development platform for delivering beautiful apps across multiple digital touch points with one platform." />
<link rel="canonical" href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/hclfoundry_containers_solution_on-prem/Content/Containers_Solution_Appendices.html" />
<meta property="og:url" content="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/hclfoundry_containers_solution_on-prem/Content/Containers_Solution_Appendices.html" />
<meta property="og:site_name" content="VoltMx" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Appendices" />
<script type="application/ld+json">
{"url":"https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/hclfoundry_containers_solution_on-prem/Content/Containers_Solution_Appendices.html","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://hcl-tech-software.github.io/volt-mx-docs/Volt_Mx_logo.png"}},"headline":"Appendices","description":"Industry-leading low-code application development platform for delivering beautiful apps across multiple digital touch points with one platform.","@type":"WebPage","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
</head>
<body>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-search" viewBox="0 0 24 24">
    <title>Search</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
      <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
    </svg>
  </symbol>
</svg>
<style>
  .sub-nav a[href*="/documentation/"] {
   border-bottom: 3px #d694f9 solid;
}
</style>
  <div class="top-header">
    <div class="site-header">
      <a href="https://hcl-tech-software.github.io/volt-mx-docs/" class="site-title lh-tight">
  <div class="site-logo"></div>
</a>
      <a href="#" id="mainmenu-button"  class="site-button">
        <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg>
      </a>
    </div>
  </div>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="svg-link" viewBox="0 0 24 24">
      <title>Link</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
      </svg>
    </symbol>
    <symbol id="svg-search" viewBox="0 0 24 24">
      <title>Search</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
        <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
      </svg>
    </symbol>
    <symbol id="svg-menu" viewBox="0 0 24 24">
      <title>Menu</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
        <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </symbol>
    <symbol id="svg-arrow-right" viewBox="0 0 24 24">
      <title>Expand</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
        <polyline points="9 18 15 12 9 6"></polyline>
      </svg>
    </symbol>
    <symbol id="svg-doc" viewBox="0 0 24 24">
      <title>Document</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
        <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
      </svg>
    </symbol>
  </svg>
<div id="main-header" class="main-header">
      <div class="search">
        <ul class="page-nav" id="page-nav">
          <li><a href="#">Community</a></li>
          <li><a href="#" class="active">Learn</a></li>
          <li><a href="#">Releases</a></li>
          <li><a href="#">Training</a></li>
          <li><a href="#">Ideas</a></li>
          <li><a href="#">Marketplace</a></li>
          <li><a href="#">Login</a></li>
        </ul>
        <div class="search-input-wrap">
          <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="search resources..." aria-label="Search VoltMx" autocomplete="off">
          <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
        </div>
        <div id="search-results" class="search-results"></div>
      </div>
  </div>
  <script>
    const pageNav = document.getElementById('page-nav');
     const mainHeader = document.getElementById('main-header');
     const mainmenuButton = document.getElementById('mainmenu-button');
   (function(){
    mainmenuButton.addEventListener('click', function(){
      pageNav.classList.toggle('nav-open');
 });
})();
 </script>
<div class="sub-nav-wrap" id="myDIV">
    <ul class="sub-nav" >
        <li >
            <a href="/volt-mx-docs/docs/getting-started/"  class="sub-link">Getting Started</a>
        </li>
        <li>
            <a href="/volt-mx-docs/docs/tutorials/" class="sub-link">Tutorials</a>
        </li>
        <li>
            <a href="/volt-mx-docs/docs/documentation/" class="sub-link">Documentation</a>
        </li>
        <li>
            <a href="/volt-mx-docs/docs/articles/" title="test" class="sub-link">Articles</a>
        </li>
    </ul>
    <a href="#" id="menu-button" class="site-button">
        <!-- <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> -->
        select a topic <svg viewBox="0 0 24 24" class="carat-topic"><use xlink:href="#svg-arrow-right"></use></svg>
      </a>
</div>
<div class="side-bar">
  <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav">
    <ul class="nav-list"><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/fundamentals.html" class="nav-list-link">Fundamentals</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/projectorg.html" class="nav-list-link">Project Organization</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/appUserInterface.html" class="nav-list-link">App User Interface</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/widgetApiReference.html" class="nav-list-link">Widgets & API Reference</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/webAppDevelopment.html" class="nav-list-link">Web App Development</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/dataBackEndIntergration.html" class="nav-list-link">Data & Back-end Integration</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/buildAndPublish.html" class="nav-list-link">Build and Publish</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/extensibility.html" class="nav-list-link">Extensibility</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/security.html" class="nav-list-link">Security</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/howTosSampleApps.html" class="nav-list-link">How Tos & Sample Apps</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/dataIntegrationServices.html" class="nav-list-link">Data Integration Services</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/offlineObjects.html" class="nav-list-link">Offline Objects</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/apiMangement.html" class="nav-list-link">API Management</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/appServicesAdminitration.html" class="nav-list-link">App Services Administration</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/advancedServerFeature.html" class="nav-list-link">Advanced Server Features</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/analyticsAndApm.html" class="nav-list-link">Analytics and APM</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/engagementServices.html" class="nav-list-link">Engagement Services</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/quantumSync.html" class="nav-list-link">VoltMX Sync (Legacy)</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/devOps.html" class="nav-list-link">DevOps</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/heradlessAndContinuousIntegration.html" class="nav-list-link">Headless and Continuous Integration Build</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/installationManagement.html" class="nav-list-link">Installation & Management</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/deployment.html" class="nav-list-link">Deployment</a></li></ul>
  </nav>
</div>
  <div class="main" id="top">
    <div id="main-content-wrap" class="main-content-wrap">
      <div id="main-content" class="main-content" role="main">
          <p>You are here: Enabling Metrics Server</p>
      <h1 id="appendices">
          <a href="#appendices" class="anchor-heading" aria-labelledby="appendices"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Appendices
      </h1>
<p>This section contains information about important features that are not enabled as part of the installation. These features require extra customizations to be enabled. Following is the detailed explanation to enable important features such as Metrics server, Kuberhealthy, etc.</p>
      <h2 id="enabling-metrics-server">
          <a href="#enabling-metrics-server" class="anchor-heading" aria-labelledby="enabling-metrics-server"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Enabling Metrics Server
      </h2>
<p>Metrics Server is a cluster-wide aggregation of resource usage data. It collects metrics like the CPU or memory consumption for containers or nodes, from the Summary API, exposed by Kubelet on each node. If you want to know the CPU or memory usage consumption through command line, you must enable the metrics server. It is not enabled as part of Foundry installation and is an add-on feature. Perform the following steps to enable metrics server.</p>
<ol>
  <li>Navigate to the Foundry container artifact folder by running the following command.</li>
</ol>
<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">​​​​​cd HCLFoundryContainerOnPrem-9.0.0.0\_GA​
    </code></pre>
</figure>
<p>​​​​​</p>
<ol>
  <li>Run the kubectl apply command to enable the metrics-server.</li>
</ol>
<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">​​​​​sudo kubectl apply -f add-ons/metrics-server​
    </code></pre>
</figure>
<p>​​​​​</p>
<p>You must wait a for a minute for the metrics-server to start running. Once it starts working, use the following commands to get the CPU or memory consumption of the pods and nodes.</p>
<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">​​​​​kubectl top nodes  #To get resource usage of nodes  
kubectl top pods -n default  #To get resource usage of foundry pods running in default namespace  
kubectl top pods -n --all-namespaces  #To get resource usage of all pods across all namespaces​</code></pre>
</figure>
<p>​​​​​</p>
      <h2 id="enabling-kuberhealthy">
          <a href="#enabling-kuberhealthy" class="anchor-heading" aria-labelledby="enabling-kuberhealthy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Enabling Kuberhealthy
      </h2>
<p>Kuberhealthy is an operator for running synthetic checks. By creating a custom resource (a khcheck) in your cluster, you can easily enable various synthetic test containers. Kuberhealthy is not enabled as part of Foundry installation. It is an add-on feature. Perform the following steps to enable kuberhealthy.</p>
<ol>
  <li>Navigate to the Foundry container artifact folder by running the following command.</li>
</ol>
<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">​​​​​cd HCLFoundryContainerOnPrem-9.0.0.0\_GA​
    </code></pre>
</figure>
<p>​​​​​</p>
<ol>
  <li>Deploy the CRDs (Custom Resources), which creates a <strong>customResource</strong> check named <strong>KuberhealthyCheck</strong>.</li>
</ol>
<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">​​​​​sudo kubectl apply -f add-ons/kuberhealthy/Resources/crd-khcheck.yaml  
    sudo kubectl apply -f add-ons/kuberhealthy/Resources/crd-khstate.yaml  
    sudo kubectl apply -f add-ons/kuberhealthy/Resources/crd-servicemonitor.yaml​
    </code></pre>
</figure>
<p>​​​​​</p>
<ol>
  <li>Deploy <code class="language-plaintext highlighter-rouge">kuberhealthy.yaml</code> to create a <strong>Kuberhealthy</strong> namespace.</li>
</ol>
<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">​​​​​sudo kubectl apply -f add-ons/kuberhealthy/Resources/kuberhealthy.yaml​
    </code></pre>
</figure>
<p>​​​​​</p>
<ol>
  <li>Deploy other <strong>kuberhealthy yml</strong> files by running following command.</li>
</ol>
<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">​​​​​sudo kubectl apply -f add-ons/kuberhealthy/Resources​
    </code></pre>
</figure>
<p>​​​​​</p>
<ol>
  <li>Create the Grafana dashboard by importing <code class="language-plaintext highlighter-rouge">dashboard.json</code> file which is present in <code class="language-plaintext highlighter-rouge">HCLFoundryContainerOnPrem-9.0.0.0_GA/add-ons/kuberhealthy/Dashboard</code>. For importing the dashboard, refer to <a href="Containers_Solution_PostInstallation.htm#Grafana">Configuring Grafana Monitoring Tool</a>.</li>
</ol>
      <h2 id="enabling-stern">
          <a href="#enabling-stern" class="anchor-heading" aria-labelledby="enabling-stern"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Enabling Stern
      </h2>
<p>Although Kibana dashboard is provided as a default option with the VoltMX Foundry cluster setup, there might be times where you would want to quickly debug using the command line. Stern allows you to tail the log output from multiple pods belonging to a service and from multiple containers within the pod. Each result is color coded for quicker debugging.For more information, refer to <a href="https://kubernetes.io/blog/2016/10/tail-kubernetes-with-stern/">Tail Kubernetes with Stern</a>.</p>
<p>Perform the following steps to enable Stern:</p>
<ol>
  <li>Download the latest binary from <a href="https://github.com/wercker/stern/releases">GitHub - Stern Releases</a>.</li>
  <li>Refer to <a href="https://github.com/wercker/stern">GitHub - Stern</a> for the Stern commands. You can run the stern commands as required.</li>
</ol>
      <h2 id="specifying-the-poddisruptionbudget">
          <a href="#specifying-the-poddisruptionbudget" class="anchor-heading" aria-labelledby="specifying-the-poddisruptionbudget"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Specifying the PodDisruptionBudget
      </h2>
<p>A <strong>PodDisruptionBudget</strong> is an indicator of the number of disruptions that can be tolerated at a given time for a class of pods (a budget of faults). Whenever a disruption to the pods in a service is calculated to cause the service to drop below the budget, the operation is paused until it can maintain the budget. For example, a drain event could be temporarily halted while it waits for more pods to become available such that the budget isn’t crossed by evicting the pods.</p>
<p>To configure a PodDisruptionBudget, you must create a <code class="language-plaintext highlighter-rouge">PodDisruptionBudget</code> resource that matches the pods in the service. Run the following yml file to create a PodDisruptionBudget. You can change the <strong>minAvailable</strong> to denote the minimum number of available pods at given point of time.</p>
<figure class="highlight">
  <pre><code class="language-voltmx" data-lang="voltmx">​​​​​apiVersion: policy/v1beta1
kind: PodDisruptionBudget
metadata:
  name: hcl-poddisruption
spec:
  minAvailable: 1
  selector:
    matchLabels:
      app: hcl-foundry-identity
      app: hcl-foundry-console
      app: hcl-foundry-apiportal
      app: hcl-foundry-integration
      app: hcl-foundry-engagement​</code></pre>
</figure>
<p>​​​​​</p>
            <!--<p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2017-2020 HCL Digital Solutions</p>-->
              <div class="d-flex mt-2">
              </div>
          </footer>
      </div>
    </div>
      <div class="search-overlay"></div>
     <!-- footer from footer html -->
   <footer>
    <div>
        <ul class="social-nav">
            <li><a href="#" class="facebook">Facebook</a></li>
            <li><a href="#" class="linkedin">LinkedIn</a></li>
            <li><a href="#" class="twitter">Twitter</a></li>
            <li><a href="#" class="youtube">Youtube</a></li>
            <li><a href="#" class="glassdoor">Glassdoor</a></li>
        </ul>
    </div>
    <p>
        &copy; Copyright 2021 HCL Softwares. All rights reserved. Various trademarks held by their respective owners.
    </p>
    <p class="foot-nav">
        <a href="#">Privacy Statement</a> | <a href="#">Terms of Use</a>
    </p>
</footer>
  </div>
  <div class="right-menu">
<nav role="navigation" aria-label="Main" id="sub-site-nav" class="site-nav">
      <ul class="nav-list" >
        <li id="right-menu-item"
        class="nav-list-item active"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/hclfoundry_containers_solution_on-prem/Content/Containers_Solution_Appendices.html"
            class="nav-list-link active">Appendices</a></li>
        <li id="right-menu-item"
        class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/hclfoundry_containers_solution_on-prem/Content/Containers_Solution_FAQs_and_Troubleshooting.html"
            class="nav-list-link">FAQs and Troubleshooting</a></li>
        <li id="right-menu-item"
        class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/hclfoundry_containers_solution_on-prem/Content/Containers_Solution_PostInstallation.html"
            class="nav-list-link">Post Installation Tasks</a></li>
        <li id="right-menu-item"
        class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/hclfoundry_containers_solution_on-prem/Content/HCL_Foundry_Containers_Solution_On-Prem.html"
            class="nav-list-link">Overview - VoltMX Foundry Containers Solution On-Premises</a></li>
        <li id="right-menu-item"
        class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/hclfoundry_containers_solution_on-prem/Content/HCL_Foundry_Containers_Solution_On-Premises_Install_Guide.html"
            class="nav-list-link">Revision History - VoltMX Foundry Containers Solution On-Premises Installation Guide</a></li>
        <li id="right-menu-item"
        class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/hclfoundry_containers_solution_on-prem/Content/Introduction.html"
            class="nav-list-link">VoltMX Foundry Installation Guide - Containers Solution</a></li>
    </ul>
    </nav>
    <script>
        const subpageNav = document.getElementById('sub-site-nav');
     const submainmenuButton = document.getElementById('sub-menu-button');
   (function(){
    submainmenuButton.addEventListener('click', function(){ 
      subpageNav.classList.toggle('nav-open');
 });
})();
</script>
</div></body>
</html>
